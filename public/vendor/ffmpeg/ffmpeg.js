!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FFmpegWASM=t():e.FFmpegWASM=t()}(self,()=>(()=>{"use strict";var e,t={m:{},d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},u:e=>e+".ffmpeg.js"};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{t.g.importScripts&&(e=t.g.location+"");var e,i=t.g.document;if(!e&&i&&(i.currentScript&&(e=i.currentScript.src),!e)){var s=i.getElementsByTagName("script");if(s.length)for(var a=s.length-1;a>-1&&!e;)e=s[a--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href;var i,s={};t.r(s),t.d(s,{FFFSType:()=>e,FFmpeg:()=>E}),function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"}(i||(i={}));let a=(()=>{let e=0;return()=>e++})(),r=(Error("unknown message type"),Error("ffmpeg is not loaded, call `await ffmpeg.load()` first")),o=Error("called FFmpeg.terminate()");Error("failed to import ffmpeg-core.js");class E{#e=null;#t={};#i={};#s=[];#a=[];loaded=!1;#r=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:t,data:s}})=>{switch(t){case i.LOAD:this.loaded=!0,this.#t[e](s);break;case i.MOUNT:case i.UNMOUNT:case i.EXEC:case i.FFPROBE:case i.WRITE_FILE:case i.READ_FILE:case i.DELETE_FILE:case i.RENAME:case i.CREATE_DIR:case i.LIST_DIR:case i.DELETE_DIR:this.#t[e](s);break;case i.LOG:this.#s.forEach(e=>e(s));break;case i.PROGRESS:this.#a.forEach(e=>e(s));break;case i.ERROR:this.#i[e](s)}delete this.#t[e],delete this.#i[e]})};#o=({type:e,data:t},i=[],s)=>this.#e?new Promise((r,o)=>{let E=a();this.#e&&this.#e.postMessage({id:E,type:e,data:t},i),this.#t[E]=r,this.#i[E]=o,s?.addEventListener("abort",()=>{o(new DOMException(`Message # ${E} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(r);on(e,t){"log"===e?this.#s.push(t):"progress"===e&&this.#a.push(t)}off(e,t){"log"===e?this.#s=this.#s.filter(e=>e!==t):"progress"===e&&(this.#a=this.#a.filter(e=>e!==t))}load=({classWorkerURL:e,...s}={},{signal:a}={})=>(this.#e||(this.#e=e?new Worker(new URL(e,"file:///Users/focus/Projects/ffmpeg.wasm/packages/ffmpeg/dist/esm/classes.js"),{type:"module"}):new Worker(new URL(t.p+t.u(814),t.b),{type:void 0}),this.#r()),this.#o({type:i.LOAD,data:s},void 0,a));exec=(e,t=-1,{signal:s}={})=>this.#o({type:i.EXEC,data:{args:e,timeout:t}},void 0,s);ffprobe=(e,t=-1,{signal:s}={})=>this.#o({type:i.FFPROBE,data:{args:e,timeout:t}},void 0,s);terminate=()=>{for(let e of Object.keys(this.#i))this.#i[e](o),delete this.#i[e],delete this.#t[e];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,t,{signal:s}={})=>{let a=[];return t instanceof Uint8Array&&a.push(t.buffer),this.#o({type:i.WRITE_FILE,data:{path:e,data:t}},a,s)};mount=(e,t,s)=>this.#o({type:i.MOUNT,data:{fsType:e,options:t,mountPoint:s}},[]);unmount=e=>this.#o({type:i.UNMOUNT,data:{mountPoint:e}},[]);readFile=(e,t="binary",{signal:s}={})=>this.#o({type:i.READ_FILE,data:{path:e,encoding:t}},void 0,s);deleteFile=(e,{signal:t}={})=>this.#o({type:i.DELETE_FILE,data:{path:e}},void 0,t);rename=(e,t,{signal:s}={})=>this.#o({type:i.RENAME,data:{oldPath:e,newPath:t}},void 0,s);createDir=(e,{signal:t}={})=>this.#o({type:i.CREATE_DIR,data:{path:e}},void 0,t);listDir=(e,{signal:t}={})=>this.#o({type:i.LIST_DIR,data:{path:e}},void 0,t);deleteDir=(e,{signal:t}={})=>this.#o({type:i.DELETE_DIR,data:{path:e}},void 0,t)}return function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"}(e||(e={})),s})());