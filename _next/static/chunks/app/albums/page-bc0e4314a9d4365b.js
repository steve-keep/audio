(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[187],{803:function(){},8050:function(e,t,n){Promise.resolve().then(n.bind(n,6367))},6367:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(7437),a=n(2265),u=n(7138),i=n(2561);function s(){let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async()=>{await (0,i.zK)(),t((0,i.k8)())})()},[]),(0,r.jsxs)("main",{children:[(0,r.jsx)("h1",{children:"Albums"}),(0,r.jsx)("div",{className:"grid-container",children:e.map(e=>(0,r.jsxs)(u.default,{href:"/album#".concat(encodeURIComponent("".concat(e.artistName," - ").concat(e.name))),className:"grid-item",children:[(0,r.jsx)("img",{src:e.imageUrl,alt:e.name,"data-testid":"/placeholder.svg"===e.imageUrl?"placeholder-image":""}),(0,r.jsx)("h3",{children:e.name}),(0,r.jsx)("p",{children:e.artistName})]},"".concat(e.artistName,"-").concat(e.name)))})]})}},2561:function(e,t,n){"use strict";n.d(t,{EP:function(){return d},Jl:function(){return S},Lj:function(){return x},QT:function(){return C},UM:function(){return f},Xs:function(){return h},ZG:function(){return R},Zi:function(){return k},_T:function(){return U},aU:function(){return p},bN:function(){return O},eK:function(){return b},fC:function(){return N},gG:function(){return T},k8:function(){return I},mF:function(){return g},qn:function(){return A},zK:function(){return m}});var r=n(2040),a=n.n(r);let u=null,i=null,s="audio-indexer-db",c="database";async function l(){return i||(i=await a()({locateFile:e=>"https://sql.js.org/dist/".concat(e)}))}function o(){return new Promise((e,t)=>{let n=indexedDB.open(s,1);n.onerror=()=>t("Error opening IndexedDB"),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{e.target.result.createObjectStore(c)}})}async function E(){let e=await o();return new Promise((t,n)=>{let r=e.transaction(c,"readonly").objectStore(c).get("db");r.onerror=()=>n("Error loading from IndexedDB"),r.onsuccess=()=>t(r.result)})}async function f(){if(!u)return;let e=u.export();(await o()).transaction(c,"readwrite").objectStore(c).put(e,"db")}async function m(){if(u)return u;let e=await l(),t=await E();return(u=t?new e.Database(t):new e.Database)&&u.run("\n    CREATE TABLE IF NOT EXISTS tracks (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      title TEXT,\n      artist TEXT,\n      album TEXT,\n      track TEXT\n    );\n    CREATE TABLE IF NOT EXISTS artists (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT UNIQUE,\n      imageUrl TEXT\n    );\n    CREATE TABLE IF NOT EXISTS albums (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT,\n      artistName TEXT,\n      imageUrl TEXT,\n      UNIQUE(name, artistName)\n    );\n  "),u}function T(e){if(!u)return;let t=u.prepare("INSERT INTO tracks (title, artist, album, track) VALUES (?, ?, ?, ?)");t.run([e.title,e.artist,e.album,e.track]),t.free()}function d(e){if(!u)return;let t=u.prepare("INSERT OR IGNORE INTO artists (name, imageUrl) VALUES (?, ?)");t.run([e.name,e.imageUrl]),t.free()}function R(e){if(!u)return;let t=u.prepare("INSERT OR IGNORE INTO albums (name, artistName, imageUrl) VALUES (?, ?, ?)");t.run([e.name,e.artistName,e.imageUrl]),t.free()}function N(){if(!u)return[];let e=u.exec("SELECT DISTINCT artist FROM tracks ORDER BY artist");return 0===e.length?[]:e[0].values.map(e=>null==e?void 0:e[0])}function p(e){if(!u)return null;let t=u.prepare("SELECT name, imageUrl FROM artists WHERE name = ?");if(t.bind([e]),t.step()){let e=t.getAsObject();return t.free(),e}return t.free(),null}function b(e,t){if(!u)return null;let n=u.prepare("SELECT name, artistName, imageUrl FROM albums WHERE name = ? AND artistName = ?");if(n.bind([e,t]),n.step()){let e=n.getAsObject();return n.free(),e}return n.free(),null}function O(e){if(!u)return[];let t=u.prepare("SELECT DISTINCT album FROM tracks WHERE artist = ? ORDER BY album");t.bind([e]);let n=[];for(;t.step();)n.push(t.get()[0]);return t.free(),n}function g(e,t){if(!u)return[];let n=u.prepare("SELECT title, artist, album, track FROM tracks WHERE album = ? AND artist = ? ORDER BY CAST(track AS INTEGER)");n.bind([e,t]);let r=[];for(;n.step();)r.push(n.getAsObject());return n.free(),r}function I(){if(!u)return[];let e=u.prepare("SELECT name, artistName, imageUrl FROM albums ORDER BY name"),t=[];for(;e.step();)t.push(e.getAsObject());return e.free(),t}function S(){if(!u)return[];let e=u.prepare("SELECT title, artist, album, track FROM tracks ORDER BY artist, album, CAST(track AS INTEGER)"),t=[];for(;e.step();)t.push(e.getAsObject());return e.free(),t}function A(){if(!u)return 0;let e=u.exec("SELECT COUNT(*) FROM artists");return 0!==e.length&&e[0].values[0]?e[0].values[0][0]:0}function C(){if(!u)return 0;let e=u.exec("SELECT COUNT(*) FROM albums");return 0!==e.length&&e[0].values[0]?e[0].values[0][0]:0}function U(){if(!u)return 0;let e=u.exec("SELECT COUNT(*) FROM tracks");return 0!==e.length&&e[0].values[0]?e[0].values[0][0]:0}function h(){return u?u.export():null}async function k(e){let t=await l();u&&u.close(),u=new t.Database(e),await f()}async function x(){return u&&(u.close(),u=null),new Promise((e,t)=>{let n=indexedDB.deleteDatabase(s);n.onerror=()=>t("Error deleting database"),n.onsuccess=()=>e()})}}},function(e){e.O(0,[218,251,128,138,971,23,744],function(){return e(e.s=8050)}),_N_E=e.O()}]);