(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{803:function(){},800:function(e,t,n){Promise.resolve().then(n.bind(n,9028))},6517:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});let r="123"},2561:function(e,t,n){"use strict";n.d(t,{EP:function(){return T},Lj:function(){return I},UM:function(){return f},Xs:function(){return R},ZG:function(){return p},Zi:function(){return N},aU:function(){return g},bN:function(){return b},eK:function(){return x},fC:function(){return h},gG:function(){return m},zK:function(){return E}});var r=n(2040),i=n.n(r);let a=null,s=null,u="audio-indexer-db",o="database";async function l(){return s||(s=await i()({locateFile:e=>"https://sql.js.org/dist/".concat(e)}))}function c(){return new Promise((e,t)=>{let n=indexedDB.open(u,1);n.onerror=()=>t("Error opening IndexedDB"),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{e.target.result.createObjectStore(o)}})}async function d(){let e=await c();return new Promise((t,n)=>{let r=e.transaction(o,"readonly").objectStore(o).get("db");r.onerror=()=>n("Error loading from IndexedDB"),r.onsuccess=()=>t(r.result)})}async function f(){if(!a)return;let e=a.export();(await c()).transaction(o,"readwrite").objectStore(o).put(e,"db")}async function E(){if(a)return a;let e=await l(),t=await d();return(a=t?new e.Database(t):new e.Database)&&a.run("\n    CREATE TABLE IF NOT EXISTS tracks (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      title TEXT,\n      artist TEXT,\n      album TEXT,\n      track TEXT\n    );\n    CREATE TABLE IF NOT EXISTS artists (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT UNIQUE,\n      imageUrl TEXT\n    );\n    CREATE TABLE IF NOT EXISTS albums (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT,\n      artistName TEXT,\n      imageUrl TEXT,\n      UNIQUE(name, artistName)\n    );\n  "),a}function m(e){if(!a)return;let t=a.prepare("INSERT INTO tracks (title, artist, album, track) VALUES (?, ?, ?, ?)");t.run([e.title,e.artist,e.album,e.track]),t.free()}function T(e){if(!a)return;let t=a.prepare("INSERT OR IGNORE INTO artists (name, imageUrl) VALUES (?, ?)");t.run([e.name,e.imageUrl]),t.free()}function p(e){if(!a)return;let t=a.prepare("INSERT OR IGNORE INTO albums (name, artistName, imageUrl) VALUES (?, ?, ?)");t.run([e.name,e.artistName,e.imageUrl]),t.free()}function h(){if(!a)return[];let e=a.exec("SELECT DISTINCT artist FROM tracks ORDER BY artist");return 0===e.length?[]:e[0].values.map(e=>null==e?void 0:e[0])}function g(e){if(!a)return null;let t=a.prepare("SELECT name, imageUrl FROM artists WHERE name = ?");if(t.bind([e]),t.step()){let e=t.getAsObject();return t.free(),e}return t.free(),null}function x(e,t){if(!a)return null;let n=a.prepare("SELECT name, artistName, imageUrl FROM albums WHERE name = ? AND artistName = ?");if(n.bind([e,t]),n.step()){let e=n.getAsObject();return n.free(),e}return n.free(),null}function b(e){if(!a)return[];let t=a.prepare("SELECT DISTINCT album FROM tracks WHERE artist = ? ORDER BY album");t.bind([e]);let n=[];for(;t.step();)n.push(t.get()[0]);return t.free(),n}function R(){return a?a.export():null}async function N(e){let t=await l();a&&a.close(),a=new t.Database(e),await f()}async function I(){return a&&(a.close(),a=null),new Promise((e,t)=>{let n=indexedDB.deleteDatabase(u);n.onerror=()=>t("Error deleting database"),n.onsuccess=()=>e()})}},9028:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(7437),i=n(2265),a=n(7138);function s(){let[e,t]=(0,i.useState)(!1);return(0,r.jsxs)("div",{style:{position:"absolute",top:"1rem",right:"1rem"},children:[(0,r.jsx)("button",{onClick:()=>t(!e),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,r.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,r.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),e&&(0,r.jsx)("div",{style:{position:"absolute",top:"2.5rem",right:"0",background:"white",border:"1px solid #ccc",borderRadius:"8px",padding:"1rem",display:"flex",flexDirection:"column"},children:(0,r.jsx)(a.default,{href:"/settings",children:"Settings"})})]})}var u=n(2561),o=n(6517);function l(){let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{await (0,u.zK)();let e=(0,u.fC)();t(await Promise.all(e.map(async e=>{let t=(0,u.aU)(e);if(t&&t.imageUrl)return t;try{var n,r;let i=await fetch("https://www.theaudiodb.com/api/v1/json/".concat(o.$,"/search.php?s=").concat(e)),a=await i.json(),s=(null===(r=a.artists)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.strArtistThumb)||"/placeholder.svg";return t={name:e,imageUrl:s},(0,u.EP)(t),t}catch(t){return console.error("Error fetching artist image:",t),{name:e,imageUrl:"/placeholder.svg"}}})))})()},[]),(0,r.jsxs)("main",{children:[(0,r.jsx)(s,{}),(0,r.jsx)("h1",{children:"Artists"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:e.map(e=>(0,r.jsx)(a.default,{href:"/artist/".concat(encodeURIComponent(e.name)),style:{textDecoration:"none",color:"inherit"},children:(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("img",{src:e.imageUrl,alt:e.name,width:"150",height:"150",style:{objectFit:"cover",borderRadius:"8px"}}),(0,r.jsx)("h3",{children:e.name})]})},e.name))})]})}}},function(e){e.O(0,[218,251,128,138,971,23,744],function(){return e(e.s=800)}),_N_E=e.O()}]);