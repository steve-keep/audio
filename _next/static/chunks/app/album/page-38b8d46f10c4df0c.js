(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[386],{803:function(){},9087:function(e,t,r){Promise.resolve().then(r.bind(r,4847))},4847:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7437),a=r(2265),i=r(7138),s=r(2561),u=r(6517);function l(){let[e,t]=(0,a.useState)([]),[r,l]=(0,a.useState)(null),[c,o]=(0,a.useState)(""),[E,d]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e=()=>{let[e,t]=window.location.hash.substring(1).split("/").map(decodeURIComponent);d(e||""),o(t||"")};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[]),(0,a.useEffect)(()=>{c&&E&&(async()=>{await (0,s.zK)(),t((0,s.mF)(c,E));let e=(0,s.eK)(c,E);if(e&&!e.imageUrl)try{var r,n;let e=await fetch("https://www.theaudiodb.com/api/v1/json/".concat(u.$,"/searchalbum.php?s=").concat(E,"&a=").concat(c)),t=await e.json(),a=(null===(n=t.album)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.strAlbumThumb)||"/placeholder.svg";(0,s.ZG)({name:c,artistName:E,imageUrl:a});let i=(0,s.eK)(c,E);l(i)}catch(t){console.error("Error fetching album image:",t),e&&l({...e,imageUrl:"/placeholder.svg"})}else l(e)})()},[c,E]),(0,n.jsxs)("main",{children:[(0,n.jsxs)(i.default,{href:"/artist#".concat(encodeURIComponent(E)),style:{marginBottom:"1.5rem",display:"inline-block"},children:["â† Back to ",E]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1.5rem"},children:[r&&(0,n.jsx)("img",{src:r.imageUrl,alt:r.name,style:{width:"150px",height:"150px",objectFit:"cover",borderRadius:"8px",marginRight:"1.5rem"}}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:c}),(0,n.jsx)("h2",{style:{marginTop:"-1rem",opacity:.8},children:E})]})]}),(0,n.jsx)("ul",{className:"list",children:e.map(e=>(0,n.jsxs)("li",{className:"list-item",children:[e.track,". ",e.title]},e.id))})]})}},6517:function(e,t,r){"use strict";r.d(t,{$:function(){return n}});let n="123"},2561:function(e,t,r){"use strict";r.d(t,{EP:function(){return p},Jl:function(){return I},Lj:function(){return w},UM:function(){return d},Xs:function(){return S},ZG:function(){return R},Zi:function(){return _},aU:function(){return N},bN:function(){return O},eK:function(){return b},fC:function(){return T},gG:function(){return f},k8:function(){return h},mF:function(){return g},zK:function(){return m}});var n=r(2040),a=r.n(n);let i=null,s=null,u="audio-indexer-db",l="database";async function c(){return s||(s=await a()({locateFile:e=>"https://sql.js.org/dist/".concat(e)}))}function o(){return new Promise((e,t)=>{let r=indexedDB.open(u,1);r.onerror=()=>t("Error opening IndexedDB"),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{e.target.result.createObjectStore(l)}})}async function E(){let e=await o();return new Promise((t,r)=>{let n=e.transaction(l,"readonly").objectStore(l).get("db");n.onerror=()=>r("Error loading from IndexedDB"),n.onsuccess=()=>t(n.result)})}async function d(){if(!i)return;let e=i.export();(await o()).transaction(l,"readwrite").objectStore(l).put(e,"db")}async function m(){if(i)return i;let e=await c(),t=await E();return(i=t?new e.Database(t):new e.Database)&&i.run("\n    CREATE TABLE IF NOT EXISTS artists (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT UNIQUE,\n      imageUrl TEXT\n    );\n    CREATE TABLE IF NOT EXISTS albums (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT,\n      artist_id INTEGER,\n      imageUrl TEXT,\n      FOREIGN KEY(artist_id) REFERENCES artists(id),\n      UNIQUE(name, artist_id)\n    );\n    CREATE TABLE IF NOT EXISTS tracks (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      title TEXT,\n      track TEXT,\n      album_id INTEGER,\n      artist_id INTEGER,\n      FOREIGN KEY(album_id) REFERENCES albums(id),\n      FOREIGN KEY(artist_id) REFERENCES artists(id)\n    );\n  "),i}function f(e){if(!i)return;let t=function(e){if(!i)throw Error("Database not initialized");let t=i.prepare("SELECT id FROM artists WHERE name = ?");if(t.bind([e]),t.step()){let e=t.get()[0];return t.free(),e}t.free();let r=i.prepare("INSERT INTO artists (name) VALUES (?)");return r.run([e]),r.free(),i.exec("SELECT last_insert_rowid()")[0].values[0][0]}(e.artist),r=function(e,t){if(!i)throw Error("Database not initialized");let r=i.prepare("SELECT id FROM albums WHERE name = ? AND artist_id = ?");if(r.bind([e,t]),r.step()){let e=r.get()[0];return r.free(),e}r.free();let n=i.prepare("INSERT INTO albums (name, artist_id) VALUES (?, ?)");return n.run([e,t]),n.free(),i.exec("SELECT last_insert_rowid()")[0].values[0][0]}(e.album,t),n=i.prepare("INSERT INTO tracks (title, track, album_id, artist_id) VALUES (?, ?, ?, ?)");n.run([e.title,e.track,r,t]),n.free()}function p(e){if(!i)return;let t=i.prepare("UPDATE artists SET imageUrl = ? WHERE name = ?");t.run([e.imageUrl,e.name]),t.free()}function R(e){if(!i)return;let t=i.prepare("SELECT id FROM artists WHERE name = ?");if(t.bind([e.artistName]),!t.step()){t.free();return}let r=t.get()[0];t.free();let n=i.prepare("UPDATE albums SET imageUrl = ? WHERE name = ? AND artist_id = ?");n.run([e.imageUrl,e.name,r]),n.free()}function T(){if(!i)return[];let e=i.prepare("SELECT id, name, imageUrl FROM artists ORDER BY name"),t=[];for(;e.step();)t.push(e.getAsObject());return e.free(),t}function N(e){if(!i)return null;let t=i.prepare("SELECT id, name, imageUrl FROM artists WHERE name = ?");if(t.bind([e]),t.step()){let e=t.getAsObject();return t.free(),e}return t.free(),null}function b(e,t){if(!i)return null;let r=i.prepare("\n      SELECT a.id, a.name, a.artist_id, a.imageUrl, r.name as artistName\n      FROM albums a\n      JOIN artists r ON a.artist_id = r.id\n      WHERE a.name = ? AND r.name = ?\n  ");if(r.bind([e,t]),r.step()){let e=r.getAsObject();return r.free(),e}return r.free(),null}function O(e){if(!i)return[];let t=i.prepare("SELECT a.id, a.name, a.artist_id, a.imageUrl, r.name as artistName\n     FROM albums a\n     JOIN artists r ON a.artist_id = r.id\n     WHERE r.name = ?\n     ORDER BY a.name");t.bind([e]);let r=[];for(;t.step();)r.push(t.getAsObject());return t.free(),r}function g(e,t){if(!i)return[];let r=i.prepare("\n      SELECT t.id, t.title, t.track, t.album_id, t.artist_id, r.name as artistName, a.name as albumName\n      FROM tracks t\n      JOIN artists r ON t.artist_id = r.id\n      JOIN albums a ON t.album_id = a.id\n      WHERE a.name = ? AND r.name = ?\n      ORDER BY CAST(t.track AS INTEGER)\n  ");r.bind([e,t]);let n=[];for(;r.step();)n.push(r.getAsObject());return r.free(),n}function h(){if(!i)return[];let e=i.prepare("\n      SELECT a.id, a.name, a.artist_id, a.imageUrl, r.name as artistName\n      FROM albums a\n      JOIN artists r ON a.artist_id = r.id\n      ORDER BY a.name\n  "),t=[];for(;e.step();)t.push(e.getAsObject());return e.free(),t}function I(){if(!i)return[];let e=i.prepare("\n      SELECT t.id, t.title, t.track, t.album_id, t.artist_id, r.name as artistName, a.name as albumName\n      FROM tracks t\n      JOIN artists r ON t.artist_id = r.id\n      JOIN albums a ON t.album_id = a.id\n      ORDER BY r.name, a.name, CAST(t.track AS INTEGER)\n  "),t=[];for(;e.step();)t.push(e.getAsObject());return e.free(),t}function S(){return i?i.export():null}async function _(e){let t=await c();i&&i.close(),i=new t.Database(e),await d()}async function w(){return i&&(i.close(),i=null),new Promise((e,t)=>{let r=indexedDB.deleteDatabase(u);r.onerror=()=>t("Error deleting database"),r.onsuccess=()=>e()})}},7138:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(231),a=r.n(n)}},function(e){e.O(0,[218,231,251,128,971,190,744],function(){return e(e.s=9087)}),_N_E=e.O()}]);