(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3586:(e,t,r)=>{Promise.resolve().then(r.bind(r,6919))},6919:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(5155),l=r(2115);function s(){let[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)(null),[i,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{o("showDirectoryPicker"in window)},[]);let c=async()=>{try{let e=await window.showDirectoryPicker(),n=[];for await(let t of e.values())if("file"===t.kind){let e=t.name.toLowerCase();(e.endsWith(".mp3")||e.endsWith(".flac"))&&n.push(await t.getFile())}let l=(await r.e(213).then(r.t.bind(r,3213,23))).default,s=(await Promise.all(n.map(e=>new Promise((t,r)=>{l.read(e,{onSuccess:e=>{let r=e.tags;t({title:r.title||"Unknown Title",artist:r.artist||"Unknown Artist",album:r.album||"Unknown Album",track:r.track||"0"})},onError:r=>{console.error(r),t({title:e.name,artist:"Unknown Artist",album:"Unknown Album",track:"0"})}})})))).reduce((e,t)=>((e[t.album]=e[t.album]||[]).push(t),e),{}),a=Object.keys(s).map(e=>({name:e,tracks:s[e].sort((e,t)=>{let r=parseInt(e.track.split("/")[0],10),n=parseInt(t.track.split("/")[0],10);return r-n})})).sort((e,t)=>e.name.localeCompare(t.name));t(a)}catch(e){console.error("Error selecting directory:",e)}};return(0,n.jsxs)("main",{children:[(0,n.jsx)("h1",{children:"Audio File Indexer"}),i?(0,n.jsx)("button",{onClick:c,children:"Select Directory"}):(0,n.jsx)("p",{children:"The File System Access API is not supported in your browser."}),e.length>0&&(0,n.jsx)("ul",{children:e.map(e=>(0,n.jsxs)("li",{children:[(0,n.jsx)("h2",{onClick:()=>{var t;a(s===(t=e.name)?null:t)},style:{cursor:"pointer"},children:e.name}),s===e.name&&(0,n.jsx)("ul",{children:e.tracks.map(e=>(0,n.jsxs)("li",{children:[e.track," - ",e.title]},e.title))})]},e.name))})]})}}},e=>{e.O(0,[441,794,358],()=>e(e.s=3586)),_N_E=e.O()}]);