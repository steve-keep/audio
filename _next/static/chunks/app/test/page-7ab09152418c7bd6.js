(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{9185:function(e,t,r){"use strict";e.exports=r.p+"static/media/id3_wasm_bg.5bccd218.wasm"},7401:function(e,t,r){Promise.resolve().then(r.bind(r,512))},512:function(e,t,r){"use strict";let a,n;r.r(t),r.d(t,{default:function(){return q}});var s,i,_,o,l=r(7437),d=r(2265),c=r(2638),g=r.n(c),w=r(6647),u=r.n(w);(s=_||(_={})).LOAD="LOAD",s.EXEC="EXEC",s.FFPROBE="FFPROBE",s.WRITE_FILE="WRITE_FILE",s.READ_FILE="READ_FILE",s.DELETE_FILE="DELETE_FILE",s.RENAME="RENAME",s.CREATE_DIR="CREATE_DIR",s.LIST_DIR="LIST_DIR",s.DELETE_DIR="DELETE_DIR",s.ERROR="ERROR",s.DOWNLOAD="DOWNLOAD",s.PROGRESS="PROGRESS",s.LOG="LOG",s.MOUNT="MOUNT",s.UNMOUNT="UNMOUNT";let b=(n=0,()=>n++);Error("unknown message type");let h=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),m=Error("called FFmpeg.terminate()");Error("failed to import ffmpeg-core.js");class f{#e=null;#t={};#r={};#a=[];#n=[];loaded=!1;#s=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:t,data:r}})=>{switch(t){case _.LOAD:this.loaded=!0,this.#t[e](r);break;case _.MOUNT:case _.UNMOUNT:case _.EXEC:case _.FFPROBE:case _.WRITE_FILE:case _.READ_FILE:case _.DELETE_FILE:case _.RENAME:case _.CREATE_DIR:case _.LIST_DIR:case _.DELETE_DIR:this.#t[e](r);break;case _.LOG:this.#a.forEach(e=>e(r));break;case _.PROGRESS:this.#n.forEach(e=>e(r));break;case _.ERROR:this.#r[e](r)}delete this.#t[e],delete this.#r[e]})};#i=({type:e,data:t},r=[],a)=>this.#e?new Promise((n,s)=>{let i=b();this.#e&&this.#e.postMessage({id:i,type:e,data:t},r),this.#t[i]=n,this.#r[i]=s,a?.addEventListener("abort",()=>{s(new DOMException(`Message # ${i} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(h);on(e,t){"log"===e?this.#a.push(t):"progress"===e&&this.#n.push(t)}off(e,t){"log"===e?this.#a=this.#a.filter(e=>e!==t):"progress"===e&&(this.#n=this.#n.filter(e=>e!==t))}load=({classWorkerURL:e,...t}={},{signal:a}={})=>(this.#e||(this.#e=e?new Worker(new URL(e,"file:///home/runner/work/audio/audio/node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js"),{type:"module"}):new Worker(r.tu(new URL(r.p+r.u(72),r.b)),{type:void 0}),this.#s()),this.#i({type:_.LOAD,data:t},void 0,a));exec=(e,t=-1,{signal:r}={})=>this.#i({type:_.EXEC,data:{args:e,timeout:t}},void 0,r);ffprobe=(e,t=-1,{signal:r}={})=>this.#i({type:_.FFPROBE,data:{args:e,timeout:t}},void 0,r);terminate=()=>{for(let e of Object.keys(this.#r))this.#r[e](m),delete this.#r[e],delete this.#t[e];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,t,{signal:r}={})=>{let a=[];return t instanceof Uint8Array&&a.push(t.buffer),this.#i({type:_.WRITE_FILE,data:{path:e,data:t}},a,r)};mount=(e,t,r)=>this.#i({type:_.MOUNT,data:{fsType:e,options:t,mountPoint:r}},[]);unmount=e=>this.#i({type:_.UNMOUNT,data:{mountPoint:e}},[]);readFile=(e,t="binary",{signal:r}={})=>this.#i({type:_.READ_FILE,data:{path:e,encoding:t}},void 0,r);deleteFile=(e,{signal:t}={})=>this.#i({type:_.DELETE_FILE,data:{path:e}},void 0,t);rename=(e,t,{signal:r}={})=>this.#i({type:_.RENAME,data:{oldPath:e,newPath:t}},void 0,r);createDir=(e,{signal:t}={})=>this.#i({type:_.CREATE_DIR,data:{path:e}},void 0,t);listDir=(e,{signal:t}={})=>this.#i({type:_.LIST_DIR,data:{path:e}},void 0,t);deleteDir=(e,{signal:t}={})=>this.#i({type:_.DELETE_DIR,data:{path:e}},void 0,t)}(i=o||(o={})).MEMFS="MEMFS",i.NODEFS="NODEFS",i.NODERAWFS="NODERAWFS",i.IDBFS="IDBFS",i.WORKERFS="WORKERFS",i.PROXYFS="PROXYFS";let p=Error("failed to get response body reader"),y=Error("failed to complete download"),E=async(e,t)=>{let r;let a=await fetch(e);try{let n=parseInt(a.headers.get("Content-Length")||"-1"),s=a.body?.getReader();if(!s)throw p;let i=[],_=0;for(;;){let{done:r,value:a}=await s.read(),o=a?a.length:0;if(r){if(-1!=n&&n!==_)throw y;t&&t({url:e,total:n,received:_,delta:o,done:r});break}i.push(a),_+=o,t&&t({url:e,total:n,received:_,delta:o,done:r})}let o=new Uint8Array(_),l=0;for(let e of i)o.set(e,l),l+=e.length;r=o.buffer}catch(n){console.log("failed to send download progress event: ",n),r=await a.arrayBuffer(),t&&t({url:e,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},x=async(e,t,r=!1,a)=>{let n=new Blob([r?await E(e,a):await (await fetch(e)).arrayBuffer()],{type:t});return URL.createObjectURL(n)};function R(e,t){var r;return r=e>>>=0,(A+=t)>=2146435072&&((F=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0})).decode(),A=t),F.decode(j().subarray(r,r+t))}let v=null;function j(){return(null===v||0===v.byteLength)&&(v=new Uint8Array(a.memory.buffer)),v}function T(e){return null==e}function k(e,t){let r=t(1*e.length,1)>>>0;return j().set(e,r/1),L=e.length,r}function D(e,t,r){if(void 0===r){let r=S.encode(e),a=t(r.length,1)>>>0;return j().subarray(a,a+r.length).set(r),L=r.length,a}let a=e.length,n=t(a,1)>>>0,s=j(),i=0;for(;i<a;i++){let t=e.charCodeAt(i);if(t>127)break;s[n+i]=t}if(i!==a){0!==i&&(e=e.slice(i)),n=r(n,a,a=i+3*e.length,1)>>>0;let t=j().subarray(n+i,n+a);i+=S.encodeInto(e,t).written,n=r(n,a,i,1)>>>0}return L=i,n}function I(e){let t=a.__wbindgen_externrefs.get(e);return a.__externref_table_dealloc(e),t}let F=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});F.decode();let A=0,S=new TextEncoder;"encodeInto"in S||(S.encodeInto=function(e,t){let r=S.encode(e);return t.set(r),{read:e.length,written:r.length}});let L=0,O="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>a.__wbg_albumcovermetadatum_free(e>>>0,1)),C="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>a.__wbg_commentmetadatum_free(e>>>0,1)),N="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>a.__wbg_extendedtextmetadatum_free(e>>>0,1)),M="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>a.__wbg_metadata_free(e>>>0,1)),U="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>a.__wbg_tagcontroller_free(e>>>0,1));class P{static __wrap(e){e>>>=0;let t=Object.create(P.prototype);return t.__wbg_ptr=e,O.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,O.unregister(this),e}free(){let e=this.__destroy_into_raw();a.__wbg_albumcovermetadatum_free(e,0)}get data(){return a.albumcovermetadatum_data(this.__wbg_ptr)}get mimeType(){let e,t;try{let r=a.albumcovermetadatum_mimeType(this.__wbg_ptr);return e=r[0],t=r[1],R(r[0],r[1])}finally{a.__wbindgen_free(e,t,1)}}}Symbol.dispose&&(P.prototype[Symbol.dispose]=P.prototype.free);class W{static __wrap(e){e>>>=0;let t=Object.create(W.prototype);return t.__wbg_ptr=e,C.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,C.unregister(this),e}free(){let e=this.__destroy_into_raw();a.__wbg_commentmetadatum_free(e,0)}get description(){let e,t;try{let r=a.commentmetadatum_description(this.__wbg_ptr);return e=r[0],t=r[1],R(r[0],r[1])}finally{a.__wbindgen_free(e,t,1)}}get lang(){let e,t;try{let r=a.commentmetadatum_lang(this.__wbg_ptr);return e=r[0],t=r[1],R(r[0],r[1])}finally{a.__wbindgen_free(e,t,1)}}get text(){let e,t;try{let r=a.commentmetadatum_text(this.__wbg_ptr);return e=r[0],t=r[1],R(r[0],r[1])}finally{a.__wbindgen_free(e,t,1)}}}Symbol.dispose&&(W.prototype[Symbol.dispose]=W.prototype.free);class B{__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,N.unregister(this),e}free(){let e=this.__destroy_into_raw();a.__wbg_extendedtextmetadatum_free(e,0)}get description(){let e,t;try{let r=a.extendedtextmetadatum_description(this.__wbg_ptr);return e=r[0],t=r[1],R(r[0],r[1])}finally{a.__wbindgen_free(e,t,1)}}get value(){let e,t;try{let r=a.extendedtextmetadatum_value(this.__wbg_ptr);return e=r[0],t=r[1],R(r[0],r[1])}finally{a.__wbindgen_free(e,t,1)}}}Symbol.dispose&&(B.prototype[Symbol.dispose]=B.prototype.free);class z{static __wrap(e){e>>>=0;let t=Object.create(z.prototype);return t.__wbg_ptr=e,M.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,M.unregister(this),e}free(){let e=this.__destroy_into_raw();a.__wbg_metadata_free(e,0)}get trackIndex(){let e=a.__wbg_get_metadata_trackIndex(this.__wbg_ptr);return 4294967297===e?void 0:e}set trackIndex(e){a.__wbg_set_metadata_trackIndex(this.__wbg_ptr,T(e)?4294967297:e>>>0)}get trackCount(){let e=a.__wbg_get_metadata_trackCount(this.__wbg_ptr);return 4294967297===e?void 0:e}set trackCount(e){a.__wbg_set_metadata_trackCount(this.__wbg_ptr,T(e)?4294967297:e>>>0)}get discIndex(){let e=a.__wbg_get_metadata_discIndex(this.__wbg_ptr);return 4294967297===e?void 0:e}set discIndex(e){a.__wbg_set_metadata_discIndex(this.__wbg_ptr,T(e)?4294967297:e>>>0)}get discCount(){let e=a.__wbg_get_metadata_discCount(this.__wbg_ptr);return 4294967297===e?void 0:e}set discCount(e){a.__wbg_set_metadata_discCount(this.__wbg_ptr,T(e)?4294967297:e>>>0)}get year(){let e=a.__wbg_get_metadata_year(this.__wbg_ptr);return 4294967297===e?void 0:e}set year(e){a.__wbg_set_metadata_year(this.__wbg_ptr,T(e)?4294967297:e>>0)}get duration(){let e=a.__wbg_get_metadata_duration(this.__wbg_ptr);return 4294967297===e?void 0:e}set duration(e){a.__wbg_set_metadata_duration(this.__wbg_ptr,T(e)?4294967297:e>>>0)}get albumCover(){let e=a.metadata_albumCover(this.__wbg_ptr);return 0===e?void 0:P.__wrap(e)}get albumArtist(){let e;let t=a.metadata_albumArtist(this.__wbg_ptr);return 0!==t[0]&&(e=R(t[0],t[1]).slice(),a.__wbindgen_free(t[0],1*t[1],1)),e}get dateRecorded(){let e;let t=a.metadata_dateRecorded(this.__wbg_ptr);return 0!==t[0]&&(e=R(t[0],t[1]).slice(),a.__wbindgen_free(t[0],1*t[1],1)),e}get dateReleased(){let e;let t=a.metadata_dateReleased(this.__wbg_ptr);return 0!==t[0]&&(e=R(t[0],t[1]).slice(),a.__wbindgen_free(t[0],1*t[1],1)),e}get album(){let e;let t=a.metadata_album(this.__wbg_ptr);return 0!==t[0]&&(e=R(t[0],t[1]).slice(),a.__wbindgen_free(t[0],1*t[1],1)),e}get genre(){let e;let t=a.metadata_genre(this.__wbg_ptr);return 0!==t[0]&&(e=R(t[0],t[1]).slice(),a.__wbindgen_free(t[0],1*t[1],1)),e}get title(){let e;let t=a.metadata_title(this.__wbg_ptr);return 0!==t[0]&&(e=R(t[0],t[1]).slice(),a.__wbindgen_free(t[0],1*t[1],1)),e}get artist(){let e;let t=a.metadata_artist(this.__wbg_ptr);return 0!==t[0]&&(e=R(t[0],t[1]).slice(),a.__wbindgen_free(t[0],1*t[1],1)),e}get lyrics(){return a.metadata_lyrics(this.__wbg_ptr)}get comments(){return a.metadata_comments(this.__wbg_ptr)}get publisher(){let e;let t=a.metadata_publisher(this.__wbg_ptr);return 0!==t[0]&&(e=R(t[0],t[1]).slice(),a.__wbindgen_free(t[0],1*t[1],1)),e}}Symbol.dispose&&(z.prototype[Symbol.dispose]=z.prototype.free);class G{static __wrap(e){e>>>=0;let t=Object.create(G.prototype);return t.__wbg_ptr=e,U.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,U.unregister(this),e}free(){let e=this.__destroy_into_raw();a.__wbg_tagcontroller_free(e,0)}addLyrics(e){!function(e,t){if(!(e instanceof t))throw Error(`expected instance of ${t.name}`)}(e,W);var t=e.__destroy_into_raw();a.tagcontroller_addLyrics(this.__wbg_ptr,t)}setArtist(e){let t=D(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=L;a.tagcontroller_setArtist(this.__wbg_ptr,t,r)}removeYear(){a.tagcontroller_removeYear(this.__wbg_ptr)}static fromPartial(e,t){let r=k(e,a.__wbindgen_malloc),n=L;var s=T(t)?0:k(t,a.__wbindgen_malloc),i=L;let _=a.tagcontroller_fromPartial(r,n,s,i);if(_[2])throw I(_[1]);return G.__wrap(_[0])}getMetadata(){let e=a.tagcontroller_getMetadata(this.__wbg_ptr);return z.__wrap(e)}putTagInto(e){let t=k(e,a.__wbindgen_malloc),r=L,n=a.tagcontroller_putTagInto(this.__wbg_ptr,t,r);if(n[2])throw I(n[1]);return I(n[0])}removeAlbum(){a.tagcontroller_removeAlbum(this.__wbg_ptr)}removeGenre(){a.tagcontroller_removeGenre(this.__wbg_ptr)}removeTitle(){a.tagcontroller_removeTitle(this.__wbg_ptr)}setDuration(e){a.tagcontroller_setDuration(this.__wbg_ptr,e)}removeArtist(){a.tagcontroller_removeArtist(this.__wbg_ptr)}setPublisher(e){let t=D(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=L;a.tagcontroller_setPublisher(this.__wbg_ptr,t,r)}setDiscCount(e){a.tagcontroller_setDiscCount(this.__wbg_ptr,e)}setDiscIndex(e){a.tagcontroller_setDiscIndex(this.__wbg_ptr,e)}setTrackCount(e){a.tagcontroller_setTrackCount(this.__wbg_ptr,e)}setTrackIndex(e){a.tagcontroller_setTrackIndex(this.__wbg_ptr,e)}setAlbumArtist(e){let t=D(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=L;a.tagcontroller_setAlbumArtist(this.__wbg_ptr,t,r)}removeDiscCount(){a.tagcontroller_removeDiscCount(this.__wbg_ptr)}removeDiscIndex(){a.tagcontroller_removeDiscIndex(this.__wbg_ptr)}setDateRecorded(e){let t=D(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=L,n=a.tagcontroller_setDateRecorded(this.__wbg_ptr,t,r);if(n[1])throw I(n[0])}setDateReleased(e){let t=D(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=L,n=a.tagcontroller_setDateReleased(this.__wbg_ptr,t,r);if(n[1])throw I(n[0])}removeTrackCount(){a.tagcontroller_removeTrackCount(this.__wbg_ptr)}removeTrackIndex(){a.tagcontroller_removeTrackIndex(this.__wbg_ptr)}removeAlbumArtist(){a.tagcontroller_removeAlbumArtist(this.__wbg_ptr)}static new(){let e=a.tagcontroller_new();return G.__wrap(e)}static from(e){let t=k(e,a.__wbindgen_malloc),r=L,n=a.tagcontroller_from(t,r);if(n[2])throw I(n[1]);return G.__wrap(n[0])}setYear(e){a.tagcontroller_setYear(this.__wbg_ptr,e)}setAlbum(e){let t=D(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=L;a.tagcontroller_setAlbum(this.__wbg_ptr,t,r)}setGenre(e){let t=D(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=L;a.tagcontroller_setGenre(this.__wbg_ptr,t,r)}setTitle(e){let t=D(e,a.__wbindgen_malloc,a.__wbindgen_realloc),r=L;a.tagcontroller_setTitle(this.__wbg_ptr,t,r)}}Symbol.dispose&&(G.prototype[Symbol.dispose]=G.prototype.free);let X=new Set(["basic","cors","default"]);async function Y(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if(e.ok&&X.has(e.type)&&"application/wasm"!==e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{let r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}async function H(e){if(void 0!==a)return a;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===e&&(e=new r.U(r(9185)));let t=function(){let e={};return e.wbg={},e.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e=function(e,t){throw Error(R(e,t))},e.wbg.__wbg_commentmetadatum_new=function(e){return W.__wrap(e)},e.wbg.__wbg_new_25f239778d6112b9=function(){return[]},e.wbg.__wbg_new_df1173567d5ff028=function(e,t){return Error(R(e,t))},e.wbg.__wbg_new_from_slice_f9c22b9153b26992=function(e,t){var r;return new Uint8Array((r=e>>>0,j().subarray(r/1,r/1+t)))},e.wbg.__wbg_push_7d9be8f38fc13975=function(e,t){return e.push(t)},e.wbg.__wbindgen_init_externref_table=function(){let e=a.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e}();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:n,module:s}=await Y(await e,t);return a=n.exports,H.__wbindgen_wasm_module=s,v=null,a.__wbindgen_start(),a}let K=[".mp3",".flac",".m4a"];var q=()=>{let[e,t]=(0,d.useState)([]),[r,a]=(0,d.useState)(!1),[n,s]=(0,d.useState)(null),[i,_]=(0,d.useState)(""),[o,c]=(0,d.useState)([]),[w,b]=(0,d.useState)([]),[h,m]=(0,d.useState)(!1),p=(0,d.useRef)(null),[y,E]=(0,d.useState)(!1),[R,v]=(0,d.useState)("jsmediatags");(0,d.useEffect)(()=>{(async()=>{let e=new f,t="/audio/vendor/ffmpeg-core";await e.load({coreURL:await x("".concat(t,"/ffmpeg-core.js"),"text/javascript"),wasmURL:await x("".concat(t,"/ffmpeg-core.wasm"),"application/wasm")}),p.current=e,m(!0);try{await H(),E(!0)}catch(e){console.error("Failed to initialize id3-wasm",e)}})()},[]);let j=async()=>{try{let e=await window.showDirectoryPicker();s(e),t([]),_("Selected directory: ".concat(e.name))}catch(e){e instanceof DOMException&&"AbortError"===e.name?console.log("Directory selection was canceled."):console.error("Error selecting directory:",e)}},T=async e=>{let t=[],r=async e=>{for await(let a of e.values())"file"===a.kind?K.some(e=>a.name.toLowerCase().endsWith(e))&&t.push(a):"directory"===a.kind&&await r(a)};return await r(e),t},k=async(e,r)=>{t([]),c([]),b([]),_("Testing ".concat(r,"..."));let a=performance.now(),n=0,s=[],i=[];try{if("jsmediatags"===r)for(let t of e){let e=await t.getFile();await new Promise((t,r)=>{u().read(e,{onSuccess:e=>{i.push(e.tags),t()},onError:e=>r(e)})}),n++}else if("ffmpeg.wasm"===r){if(h&&p.current){let t=p.current;for(let r of e){let e=await r.getFile(),a=await e.arrayBuffer(),s=new Uint8Array(a);await t.writeFile(e.name,s),await t.exec(["-i",e.name,"-f","ffmetadata","metadata.txt"]);let _=await t.readFile("metadata.txt"),o={};new TextDecoder("utf-8").decode(_).split("\n").forEach(e=>{let[t,...r]=e.split("=");t&&r.length>0&&(o[t.trim()]=r.join("=").trim())}),i.push(o),n++}}else throw Error("ffmpeg.wasm is not loaded.")}else if("id3-wasm"===r){if(y)for(let t of e){let e,r;if(!t.name.toLowerCase().endsWith(".mp3"))continue;let a=await t.getFile(),_=await a.arrayBuffer(),o=new Uint8Array(_);try{let t={title:(r=(e=G.from(o)).getMetadata()).title,artist:r.artist,album:r.album,year:r.year,track:r.track,genre:r.genre};i.push(t)}catch(r){let e=r instanceof Error?r.message:String(r);s.push("".concat(t.name,": ").concat(e))}finally{r&&r.free(),e&&e.free()}n++}else throw Error("id3-wasm is not loaded.")}}catch(e){_("Error during testing ".concat(r,": ").concat(e instanceof Error?e.message:String(e))),console.error(e),t([{library:r,filesProcessed:n,timeTaken:performance.now()-a}]),c(s);return}t([{library:r,filesProcessed:n,timeTaken:performance.now()-a}]),c(s),b(i)},D=async()=>{if(!n)return;a(!0),_("Scanning directory for audio files...");let e=await T(n);_("Found ".concat(e.length," audio files. Now running test...")),await k(e,R),a(!1),_("Testing complete. Processed ".concat(e.length," files with ").concat(R,"."))};return(0,l.jsxs)("div",{className:g().container,children:[(0,l.jsx)("h1",{children:"Metadata Speed Test"}),(0,l.jsxs)("div",{className:g().form,children:[(0,l.jsx)("button",{onClick:j,disabled:r,children:n?"Selected: ".concat(n.name):"Select Directory"}),(0,l.jsxs)("select",{value:R,onChange:e=>v(e.target.value),children:[(0,l.jsx)("option",{value:"jsmediatags",children:"jsmediatags"}),(0,l.jsx)("option",{value:"ffmpeg.wasm",children:"ffmpeg.wasm"}),(0,l.jsx)("option",{value:"id3-wasm",children:"id3-wasm"})]}),(0,l.jsx)("button",{onClick:D,disabled:!n||r||"ffmpeg.wasm"===R&&!h||"id3-wasm"===R&&!y,children:r?"Scanning...":"Run Test"})]}),i&&(0,l.jsx)("p",{children:i}),o.length>0&&(0,l.jsxs)("div",{className:g().errors,children:[(0,l.jsx)("h2",{children:"Errors"}),(0,l.jsx)("ul",{children:o.map((e,t)=>(0,l.jsx)("li",{children:e},t))})]}),e.length>0&&(0,l.jsxs)("div",{className:g().results,children:[(0,l.jsx)("h2",{children:"Results"}),(0,l.jsxs)("table",{className:g().resultsTable,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Library"}),(0,l.jsx)("th",{children:"Files Processed"}),(0,l.jsx)("th",{children:"Time Taken (ms)"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.library}),(0,l.jsx)("td",{children:e.filesProcessed}),(0,l.jsx)("td",{children:e.timeTaken.toFixed(2)})]},e.library))})]})]}),w.length>0&&(0,l.jsxs)("div",{className:g().results,children:[(0,l.jsx)("h2",{children:"Extracted Tags"}),(0,l.jsxs)("table",{className:g().resultsTable,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Title"}),(0,l.jsx)("th",{children:"Artist"}),(0,l.jsx)("th",{children:"Album"}),(0,l.jsx)("th",{children:"Year"}),(0,l.jsx)("th",{children:"Track"}),(0,l.jsx)("th",{children:"Genre"})]})}),(0,l.jsx)("tbody",{children:w.map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.title}),(0,l.jsx)("td",{children:e.artist}),(0,l.jsx)("td",{children:e.album}),(0,l.jsx)("td",{children:e.year}),(0,l.jsx)("td",{children:e.track}),(0,l.jsx)("td",{children:e.genre})]},t))})]})]})]})}},2638:function(e){e.exports={container:"TestPage_container__UH0HI",form:"TestPage_form__XLLAj",results:"TestPage_results__2V4Bx",resultsTable:"TestPage_resultsTable__KMCwU",errors:"TestPage_errors__IR6FX"}}},function(e){e.O(0,[781,646,647,971,190,744],function(){return e(e.s=7401)}),_N_E=e.O()}]);